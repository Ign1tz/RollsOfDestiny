Create table IF NOT EXISTS Players
(
    UserID   text primary key,
    Username text not null,
    Mana     int  not null
);

CREATE table if not exists Decks
(
    DeckID   text primary key,
    PlayerID text references Players (UserID) on delete cascade not null unique
);

Create table IF NOT Exists Cards
(
    Name    text                                             not null,
    Cost    int                                              not null,
    Effect  text                                             not null,
    Picture text                                             not null,
    CardID  text                                             not null,
    DeckID  text references Decks (DeckID) on delete cascade not null,
    Played  bool                                             not null,
    InHand  bool                                             not null,
    PRIMARY KEY (Name, DeckID, CardID)
);

CREATE TABLE IF NOT EXISTS Grids
(
    GridID text primary key
);

Create table IF NOT EXISTS Columns
(
    GridID    text references Grids (GridID) on delete cascade not null,
    Placement text                                             not null,
    First     int                                              not null,
    Second    int                                              not null,
    Third     int                                              not null,
    primary key (GridID, Placement)
);

CREATE TABLE IF NOT EXISTS Games
(
    GameID       text primary key,
    Host         text references Players (UserID) on delete cascade not null,
    Guest        text references Players (UserID) on delete cascade not null,
    ActivePlayer text references Players (UserID) on delete cascade not null,
    HostGrid     text references Grids (GridID) on delete cascade   not null,
    GuestGrid    text references Grids (GridID) on delete cascade   not null,
    LastRoll     text
);

Alter Table Games add column LastRoll text